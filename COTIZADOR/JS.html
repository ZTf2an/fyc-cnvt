<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
(() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()
</script>

<script>
  function cargar() {
    let checkboxDescuento = document.getElementById('checkboxDescuento');
    let checkboxIncremento = document.getElementById('checkboxIncremento');
    let predios = document.getElementById('predios');
    let descuento = document.getElementById('inputDescuento');
            
    checkboxIncremento.addEventListener('change',habilitarIncremento);
    checkboxDescuento.addEventListener('change',habilitarDescuento);
    predios.addEventListener('keyup',calcularPrecio);
    descuento.addEventListener('change',calcularPrecio);
    
  }
  function habilitarDescuento() {
    let descuento = document.getElementById('inputDescuento');
    let checkboxDescuento = document.getElementById('checkboxDescuento');
    let incremento = document.getElementById('inputIncremento');
    let checkboxIncremento = document.getElementById('checkboxIncremento');

    if (checkboxDescuento.checked == true) {
      descuento.disabled = false;
      incremento.disabled = true;
      checkboxIncremento.checked = false;
      descuento.value = 10;
      incremento.value = '';
      calcularPrecio();
    } else {
      descuento.disabled = true;
      descuento.value = '';
      calcularPrecio();
    }
    
  }
  function habilitarIncremento() {
    let descuento = document.getElementById('inputDescuento');
    let checkboxDescuento = document.getElementById('checkboxDescuento');
    let incremento = document.getElementById('inputIncremento');
    let checkboxIncremento = document.getElementById('checkboxIncremento');

    if (checkboxIncremento.checked == true) {
      incremento.disabled = false;
      descuento.disabled = true;
      checkboxDescuento.checked = false;
      incremento.value = 10;
      descuento.value = '';
      calcularPrecio();
    } else {
      incremento.disabled = true;
      incremento.value = '';
      calcularPrecio();
    }
  }
  function calcularPrecio() {
    let predios = document.getElementById('predios');
    let formPrecio = document.getElementById('precio');
    let descuento = document.getElementById('inputDescuento');
    let incremento = document.getElementById('inputIncremento');
    let subTotal = 0;

    if (predios.value == 0) {
      subtotal = 0

    } else if (predios.value <= 50) {
      subTotal = 750000;
    } else if (predios.value <= 75) {
      subTotal = 850000;
    } else if (predios.value <= 100) {
      subTotal = 1050000;
    } else if (predios.value <= 125) {
      subTotal = 1250000;
    } else if (predios.value <= 150) {
      subTotal = 1375000;
    } else if (predios.value <= 175) {
      subTotal = 1495000;
    } else if (predios.value <= 200) {
      subTotal = 1650000;
    } else if (predios.value <= 225) {
      subTotal = 1800000;
    } else if (predios.value <= 250) {
      subTotal = 1950000;
    } else {
      subTotal = ((predios.value - 250)*3500) + 1950000;
    }
    let precioTotal = subTotal - ((subTotal/100)* descuento.value);
    formPrecio.value = precioTotal + ((precioTotal/100)* incremento.value);
  }
  window.addEventListener('load', cargar);
</script>